$C = "../Common.ui";

// Reuse your existing button/text styles
@SkillTextStyle = LabelStyle(FontSize: 16, TextColor: #ffcc00, RenderBold: true, VerticalAlignment: Center, HorizontalAlignment: Center);
@PageTitleStyle = LabelStyle(FontSize: 20, TextColor: #ffffff, RenderBold: true, VerticalAlignment: Center, HorizontalAlignment: Center);
@AttrHeaderStyle = LabelStyle(FontSize: 12, TextColor: #d9c6a5, RenderBold: true, VerticalAlignment: Center);
@AttrLabelStyle = LabelStyle(FontSize: 12, TextColor: #e6d9c3, VerticalAlignment: Center);
@AttrValueStyle = LabelStyle(FontSize: 12, TextColor: #ffffff, VerticalAlignment: Center, HorizontalAlignment: End);
@DetailTitleStyle = LabelStyle(FontSize: 14, TextColor: #f2d38a, RenderBold: true, VerticalAlignment: Center, HorizontalAlignment: Center);
@DetailHeaderStyle = LabelStyle(FontSize: 12, TextColor: #d9c6a5, RenderBold: true, VerticalAlignment: Center);
@DetailBodyStyle = LabelStyle(FontSize: 12, TextColor: #f7e9cd, Wrap: true);
@TabIconAnchor = Anchor(Width: 40, Height: 32);
@TabButtonAnchor = Anchor(Width: 52, Height: 32);
@CharacterTabStyle = TabStyleState(
  Background: "Images/Tab.png",
  Overlay: (TexturePath: "Images/TabOverlay.png", Border: 0),
  IconAnchor: @TabIconAnchor,
  Anchor: @TabButtonAnchor
);
@CharacterTabsStyle = TabNavigationStyle(
  TabStyle: (
    Default: @CharacterTabStyle,
    Hovered: @CharacterTabStyle,
    Pressed: @CharacterTabStyle
  ),
  SelectedTabStyle: (
    Default: (...@CharacterTabStyle, Overlay: (TexturePath: "Images/TabSelectedOverlay.png", Border: 0))
  )
);



$C.@PageOverlay {
  $C.@DecoratedContainer {
    Anchor: (Width: 720, Height: 600); // Wider to fit skill details

    // --- TITLE ---
    #Title {
      Group {
        Label #PageTitle {
            Text: "Skills";
            Anchor: (Left: 0, Right: 0, Height: 30);
            Style: @PageTitleStyle;
        }
        TextButton #BtnClose {
            Anchor: (Right: 0, Top: 3, Width: 30, Height: 25);
            Text: "X";
        }
      }
    }

    // --- BODY (Tabs + Content) ---
    #Content {
      LayoutMode: Top;
      Padding: (Top: 10, Left: 20, Right: 20, Bottom: 80); // Space for Header/Footer

      TabNavigation #TabBar {
        Anchor: (Height: 36, Left: 4, Right: 4);
        Style: @CharacterTabsStyle;
        SelectedTab: "Skills";

        TabButton #TabServerInfoBtn {
          Id: "ServerInfo";
          Icon: "server_info.png";
          IconSelected: "server_info.png";
        }
        TabButton #TabQuestsBtn {
          Id: "Quests";
          Icon: "quests.png";
          IconSelected: "quests.png";
        }
        TabButton #TabAttributesBtn {
          Id: "Attributes";
          Icon: "attributes.png";
          IconSelected: "attributes.png";
        }
        TabButton #TabSkillsBtn {
          Id: "Skills";
          Icon: "skills.png";
          IconSelected: "skills.png";
        }
        TabButton #TabFriendsBtn {
          Id: "Friends";
          Icon: "friends_list.png";
          IconSelected: "friends_list.png";
        }
      }

      Group { Anchor: (Height: 16); }

      Group #TabServerInfo {
        LayoutMode: Top;
        Visible: false;

        Label {
          Text: "SERVER INFO";
          Anchor: (Height: 20);
          Style: (FontSize: 12, TextColor: #AAAAAA, RenderBold: true, RenderUppercase: true, LetterSpacing: 2);
        }
        Group { Anchor: (Height: 8); }

        Group {
          LayoutMode: Left;
          Anchor: (Height: 18);

          Label { Text: "Players Online"; Style: (FontSize: 12, TextColor: #AAAAAA); }
          Group { FlexWeight: 1; }
          Label #ServerInfoPlayersOnline { Text: "-"; Anchor: (Width: 120); Style: (FontSize: 12, TextColor: #FFFFFF); }
        }
        Group { Anchor: (Height: 6); }

        Group {
          LayoutMode: Left;
          Anchor: (Height: 18);

          Label { Text: "Server Time"; Style: (FontSize: 12, TextColor: #AAAAAA); }
          Group { FlexWeight: 1; }
          Label #ServerInfoServerTime { Text: "-"; Anchor: (Width: 120); Style: (FontSize: 12, TextColor: #FFFFFF); }
        }
        Group { Anchor: (Height: 6); }

        Group {
          LayoutMode: Left;
          Anchor: (Height: 18);

          Label { Text: "Local Time"; Style: (FontSize: 12, TextColor: #AAAAAA); }
          Group { FlexWeight: 1; }
          Label #ServerInfoLocalTime { Text: "-"; Anchor: (Width: 120); Style: (FontSize: 12, TextColor: #FFFFFF); }
        }
        Group { Anchor: (Height: 6); }

        Group {
          LayoutMode: Left;
          Anchor: (Height: 18);

          Label { Text: "Server Date"; Style: (FontSize: 12, TextColor: #AAAAAA); }
          Group { FlexWeight: 1; }
          Label #ServerInfoServerDate { Text: "-"; Anchor: (Width: 120); Style: (FontSize: 12, TextColor: #FFFFFF); }
        }
        Group { Anchor: (Height: 6); }

        Group {
          LayoutMode: Left;
          Anchor: (Height: 18);

          Label { Text: "Server Zone"; Style: (FontSize: 12, TextColor: #AAAAAA); }
          Group { FlexWeight: 1; }
          Label #ServerInfoServerZone { Text: "-"; Anchor: (Width: 120); Style: (FontSize: 12, TextColor: #FFFFFF); }
        }
      }
      Group #TabQuests { LayoutMode: Top; Visible: false; }
      Group #TabAttributes {
        LayoutMode: Top;
        Visible: false;

        Group #AttributesScroll {
          LayoutMode: TopScrolling;
          Anchor: (Left: 0, Right: 0, Height: 420);
          Padding: (Right: 6);

          Group #AttrCombatCategory {
            LayoutMode: Top;
            Anchor: (Left: 0, Right: 0);

            Group #AttrCombatHeader {
              LayoutMode: Left;
              Anchor: (Height: 24, Left: 0, Right: 0);
              Background: #000000(0.25);
              Padding: (Left: 8, Right: 2);

              Label #AttrCombatTitle { Text: "Combat"; Style: @AttrHeaderStyle; }
              Group { FlexWeight: 1; }
              TextButton #AttrCombatToggle { Anchor: (Width: 20, Height: 18, Top: -1); Text: "-"; }
            }

            Group #AttrCombatContent {
              LayoutMode: Top;
              Anchor: (Left: 8, Right: 8);
              Padding: (Top: 6, Bottom: 6);
            }
          }

          Group { Anchor: (Height: 8); }

          Group #AttrGatheringCategory {
            LayoutMode: Top;
            Anchor: (Left: 0, Right: 0);

            Group #AttrGatheringHeader {
              LayoutMode: Left;
              Anchor: (Height: 24, Left: 0, Right: 0);
              Background: #000000(0.25);
              Padding: (Left: 8, Right: 2);

              Label #AttrGatheringTitle { Text: "Gathering + Crafting"; Style: @AttrHeaderStyle; }
              Group { FlexWeight: 1; }
              TextButton #AttrGatheringToggle { Anchor: (Width: 20, Height: 18, Top: -1); Text: "-"; }
            }

            Group #AttrGatheringContent {
              LayoutMode: Top;
              Anchor: (Left: 8, Right: 8);
              Padding: (Top: 6, Bottom: 6);
            }
          }

          Group { Anchor: (Height: 8); }

          Group #AttrMiscCategory {
            LayoutMode: Top;
            Anchor: (Left: 0, Right: 0);

            Group #AttrMiscHeader {
              LayoutMode: Left;
              Anchor: (Height: 24, Left: 0, Right: 0);
              Background: #000000(0.25);
              Padding: (Left: 8, Right: 2);

              Label #AttrMiscTitle { Text: "Miscellaneous"; Style: @AttrHeaderStyle; }
              Group { FlexWeight: 1; }
              TextButton #AttrMiscToggle { Anchor: (Width: 20, Height: 18, Top: -1); Text: "-"; }
            }

            Group #AttrMiscContent {
              LayoutMode: Top;
              Anchor: (Left: 8, Right: 8);
              Padding: (Top: 6, Bottom: 6);
            }
          }
        }
      }

      Group #TabSkills {
        LayoutMode: Left;
        Visible: true;

        Group #SkillsGrid {
          LayoutMode: Left;
          FlexWeight: 1;

          // COLUMN 1
          Group #Col1 {
              LayoutMode: Top;
              FlexWeight: 1;
          }
          Group { Anchor: (Width: 5); }
          // COLUMN 2
          Group #Col2 {
              LayoutMode: Top;
              FlexWeight: 1;
          }
          Group { Anchor: (Width: 5); }
          // COLUMN 3
          Group #Col3 {
              LayoutMode: Top;
              FlexWeight: 1;
          }
        }

        Group { Anchor: (Width: 10); }

        Group #SkillDetailPanel {
          LayoutMode: Top;
          Anchor: (Width: 210, Height: 420);
          Padding: (Top: 8, Left: 8, Right: 8, Bottom: 8);
          Background: #000000(0.25);

          Label #SkillDetailTitle {
            Text: "Select a skill";
            Style: @DetailTitleStyle;
            Anchor: (Height: 18);
          }
          Group { Anchor: (Height: 6); }
          Label #SkillDetailDesc {
            Text: "Click a skill to see its bonuses.";
            Style: @DetailBodyStyle;
            Anchor: (Height: 110, Left: 2);
          }

          Group { Anchor: (Height: 8); }
          Label #SkillUnlockHeader {
            Text: "Unlocks";
            Style: (...@DetailHeaderStyle, HorizontalAlignment: Center);
            Anchor: (Height: 16, Left: 0, Right: 0);
          }
          Group { Anchor: (Height: 4); }

          Group #SkillUnlockScroll {
            LayoutMode: TopScrolling;
            Anchor: (Height: 200, Left: 0, Right: 0);
            Padding: (Right: 6);

            Group #SkillUnlockList {
              LayoutMode: Top;
            }
          }
        }
      }

      Group #TabFriends { LayoutMode: Top; Visible: false; }
    }

    // --- FOOTER (Global Stats) ---
    Group #Footer {
      LayoutMode: Left;
      Anchor: (Bottom: 15, Left: 20, Right: 20, Height: 50);
      Background: #000000(0.3); // Slight dark background

      // Total Level
      Group {
        LayoutMode: Top;
        FlexWeight: 1;
        Label { Text: "Total Level"; Style: (FontSize: 12, TextColor: #AAAAAA, HorizontalAlignment: Center); }
        Label #TotalLevelVal { Text: "---"; Style: @SkillTextStyle; }
      }

      // Combat Level (Global)
      Group {
        LayoutMode: Top;
        FlexWeight: 1;
        Label { Text: "Combat Level"; Style: (FontSize: 12, TextColor: #AAAAAA, HorizontalAlignment: Center); }
        Label #CombatLevelVal { Text: "---"; Style: (FontSize: 18, TextColor: #FFFFFF, RenderBold: true, HorizontalAlignment: Center); }
      }

      // Quest Points (Currency)
      Group {
        LayoutMode: Top;
        FlexWeight: 1;
        Label { Text: "Quest Pts"; Style: (FontSize: 12, TextColor: #AAAAAA, HorizontalAlignment: Center); }
        Label #QuestPointsVal { Text: "0"; Style: @SkillTextStyle; }
      }
    }
  }
}
