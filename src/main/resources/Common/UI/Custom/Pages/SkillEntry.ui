$C = "../Common.ui";

// Reuse your existing button/text styles
@SkillTextStyle = LabelStyle(FontSize: 16, TextColor: #ffcc00, RenderBold: true, VerticalAlignment: Center, HorizontalAlignment: Center);
@PageTitleStyle = LabelStyle(FontSize: 20, TextColor: #ffffff, RenderBold: true, VerticalAlignment: Center, HorizontalAlignment: Center);
@AttrHeaderStyle = LabelStyle(FontSize: 12, TextColor: #d9c6a5, RenderBold: true, VerticalAlignment: Center);
@AttrLabelStyle = LabelStyle(FontSize: 12, TextColor: #e6d9c3, VerticalAlignment: Center);
@AttrValueStyle = LabelStyle(FontSize: 12, TextColor: #ffffff, VerticalAlignment: Center, HorizontalAlignment: End);
@DetailTitleStyle = LabelStyle(FontSize: 14, TextColor: #f2d38a, RenderBold: true, VerticalAlignment: Center, HorizontalAlignment: Center);
@DetailHeaderStyle = LabelStyle(FontSize: 12, TextColor: #d9c6a5, RenderBold: true, VerticalAlignment: Center);
@DetailBodyStyle = LabelStyle(FontSize: 12, TextColor: #f7e9cd, Wrap: true);
@TabIconAnchor = Anchor(Width: 40, Height: 32);
@TabButtonAnchor = Anchor(Width: 52, Height: 32);
@CharacterTabStyle = TabStyleState(
  Background: "Images/Tab.png",
  Overlay: (TexturePath: "Images/TabOverlay.png", Border: 0),
  IconAnchor: @TabIconAnchor,
  Anchor: @TabButtonAnchor
);
@CharacterTabsStyle = TabNavigationStyle(
  TabStyle: (
    Default: @CharacterTabStyle,
    Hovered: @CharacterTabStyle,
    Pressed: @CharacterTabStyle
  ),
  SelectedTabStyle: (
    Default: (...@CharacterTabStyle, Overlay: (TexturePath: "Images/TabSelectedOverlay.png", Border: 0))
  )
);



$C.@PageOverlay {
  $C.@DecoratedContainer {
    Anchor: (Width: 720, Height: 600);

    // --- TITLE ---
    #Title {
      Group {
        Label #PageTitle {
          Text: "Skills";
          Anchor: (Left: 0, Right: 0, Height: 30);
          Style: @PageTitleStyle;
        }
        TextButton #BtnClose {
          Anchor: (Right: 0, Top: 3, Width: 30, Height: 25);
          Text: "X";
        }
      }
    }

    // --- BODY (Tabs + Content) ---
    #Content {
      LayoutMode: Top;
      Padding: (Top: 10, Left: 20, Right: 20, Bottom: 80);

      TabNavigation #TabBar {
        Anchor: (Height: 36, Left: 4, Right: 4);
        Style: @CharacterTabsStyle;
        SelectedTab: "Skills";

        TabButton #TabCombatSettingsBtn {
          Id: "CombatSettings";
          Icon: "attack.png";
          IconSelected: "attack.png";
        }
        TabButton #TabServerInfoBtn {
          Id: "ServerInfo";
          Icon: "server_info.png";
          IconSelected: "server_info.png";
        }
        TabButton #TabQuestsBtn {
          Id: "Quests";
          Icon: "quests.png";
          IconSelected: "quests.png";
        }
        TabButton #TabAttributesBtn {
          Id: "Attributes";
          Icon: "attributes.png";
          IconSelected: "attributes.png";
        }
        TabButton #TabSkillsBtn {
          Id: "Skills";
          Icon: "skills.png";
          IconSelected: "skills.png";
        }
        TabButton #TabFriendsBtn {
          Id: "Friends";
          Icon: "friends_list.png";
          IconSelected: "friends_list.png";
        }
        TabButton #TabClanBtn {
          Id: "Clan";
          Icon: "slayer.png";
          IconSelected: "slayer.png";
        }
      }

      Group { Anchor: (Height: 16); }

      Group #TabCombatSettings {
        LayoutMode: Top;
        Visible: false;

        Label {
          Text: "COMBAT SETTINGS";
          Anchor: (Height: 20);
          Style: (FontSize: 12, TextColor: #AAAAAA, RenderBold: true, RenderUppercase: true, LetterSpacing: 2);
        }
        Group { Anchor: (Height: 8); }

        Group {
          LayoutMode: Left;
          Anchor: (Height: 28);
          Label { Text: "Melee XP"; Style: (FontSize: 12, TextColor: #AAAAAA, VerticalAlignment: Center); }
          Group { FlexWeight: 1; }
          DropdownBox #MeleeCombatStyle {
            Anchor: (Width: 150, Height: 24);
            Style: (...$C.@DefaultDropdownBoxStyle);
            MaxSelection: 1;
            ShowLabel: true;
            Value: "ATTACK";

            DropdownEntry { Text: "Attack"; Value: "ATTACK"; Selected: true; }
            DropdownEntry { Text: "Strength"; Value: "STRENGTH"; }
            DropdownEntry { Text: "Defence"; Value: "DEFENCE"; }
            DropdownEntry { Text: "Shared"; Value: "SHARED"; }
          }
        }
        Group { Anchor: (Height: 6); }

        Group {
          LayoutMode: Left;
          Anchor: (Height: 28);
          Label { Text: "Ranged XP"; Style: (FontSize: 12, TextColor: #AAAAAA, VerticalAlignment: Center); }
          Group { FlexWeight: 1; }
          DropdownBox #RangedCombatStyle {
            Anchor: (Width: 150, Height: 24);
            Style: (...$C.@DefaultDropdownBoxStyle);
            MaxSelection: 1;
            ShowLabel: true;
            Value: "RANGED";

            DropdownEntry { Text: "Ranged"; Value: "RANGED"; Selected: true; }
            DropdownEntry { Text: "Defence"; Value: "DEFENCE"; }
            DropdownEntry { Text: "Shared"; Value: "SHARED"; }
          }
        }
        Group { Anchor: (Height: 6); }

        Group {
          LayoutMode: Left;
          Anchor: (Height: 28);
          Label { Text: "Magic XP"; Style: (FontSize: 12, TextColor: #AAAAAA, VerticalAlignment: Center); }
          Group { FlexWeight: 1; }
          DropdownBox #MagicCombatStyle {
            Anchor: (Width: 150, Height: 24);
            Style: (...$C.@DefaultDropdownBoxStyle);
            MaxSelection: 1;
            ShowLabel: true;
            Value: "MAGIC";

            DropdownEntry { Text: "Magic"; Value: "MAGIC"; Selected: true; }
            DropdownEntry { Text: "Defence"; Value: "DEFENCE"; }
            DropdownEntry { Text: "Shared"; Value: "SHARED"; }
          }
        }
      }

      Group #TabServerInfo {
        LayoutMode: Top;
        Visible: false;

        Label {
          Text: "SERVER INFO";
          Anchor: (Height: 20);
          Style: (FontSize: 12, TextColor: #AAAAAA, RenderBold: true, RenderUppercase: true, LetterSpacing: 2);
        }
        Group { Anchor: (Height: 10); }

        Group #ServerInfoTopBanner {
          LayoutMode: Left;
          Anchor: (Height: 72, Left: 0, Right: 0);
          Background: #0d1623(0.75);
          Padding: (Left: 10, Right: 10, Top: 8, Bottom: 8);

          Group {
            LayoutMode: Top;
            FlexWeight: 1;
            Label { Text: "PLAYERS ONLINE"; Style: (FontSize: 10, TextColor: #d9c6a5, RenderBold: true, RenderUppercase: true, LetterSpacing: 1, HorizontalAlignment: Center); }
            Group { Anchor: (Height: 4); }
            Label #ServerInfoPlayersOnline { Text: "-"; Style: (FontSize: 20, TextColor: #ffffff, RenderBold: true, HorizontalAlignment: Center); }
          }

          Group { Anchor: (Width: 1, Top: 4, Bottom: 4); Background: #ffffff(0.15); }

          Group {
            LayoutMode: Top;
            FlexWeight: 1;
            Label { Text: "SERVER TIME"; Style: (FontSize: 10, TextColor: #d9c6a5, RenderBold: true, RenderUppercase: true, LetterSpacing: 1, HorizontalAlignment: Center); }
            Group { Anchor: (Height: 4); }
            Label #ServerInfoServerTime { Text: "-"; Style: (FontSize: 16, TextColor: #f2d38a, RenderBold: true, HorizontalAlignment: Center); }
          }

          Group { Anchor: (Width: 1, Top: 4, Bottom: 4); Background: #ffffff(0.15); }

          Group {
            LayoutMode: Top;
            FlexWeight: 1;
            Label { Text: "SERVER DATE"; Style: (FontSize: 10, TextColor: #d9c6a5, RenderBold: true, RenderUppercase: true, LetterSpacing: 1, HorizontalAlignment: Center); }
            Group { Anchor: (Height: 4); }
            Label #ServerInfoServerDate { Text: "-"; Style: (FontSize: 14, TextColor: #ffffff, RenderBold: true, HorizontalAlignment: Center); }
          }

          Group { Anchor: (Width: 1, Top: 4, Bottom: 4); Background: #ffffff(0.15); }

          Group {
            LayoutMode: Top;
            FlexWeight: 1;
            Label { Text: "NEXT RESTART"; Style: (FontSize: 10, TextColor: #d9c6a5, RenderBold: true, RenderUppercase: true, LetterSpacing: 1, HorizontalAlignment: Center); }
            Group { Anchor: (Height: 4); }
            Label #ServerInfoNextRestart { Text: "-"; Style: (FontSize: 14, TextColor: #ffffff, RenderBold: true, HorizontalAlignment: Center); }
          }
        }

        Group { Anchor: (Height: 12); }

        Group #ServerInfoEventCard {
          LayoutMode: Top;
          Anchor: (Height: 130, Left: 0, Right: 0);
          Background: #000000(0.28);
          Padding: (Top: 10, Left: 12, Right: 12, Bottom: 10);

          Label {
            Text: "CURRENT EVENT STATUS";
            Anchor: (Height: 16);
            Style: (FontSize: 10, TextColor: #d9c6a5, RenderBold: true, RenderUppercase: true, LetterSpacing: 1);
          }
          Group { Anchor: (Height: 6); }

          Label #ServerInfoEventStatus {
            Text: "No event active";
            Anchor: (Height: 22);
            Style: (FontSize: 16, TextColor: #f2d38a, RenderBold: true, HorizontalAlignment: Center);
          }
          Group { Anchor: (Height: 6); }

          Group { Anchor: (Height: 1, Left: 0, Right: 0); Background: #f2d38a(0.4); }
          Group { Anchor: (Height: 8); }

          Label #ServerInfoEventDescription {
            Text: "No event is currently active. Check this panel for upcoming world events.";
            Anchor: (Left: 0, Right: 0);
            Style: (FontSize: 12, TextColor: #f7e9cd, Wrap: true, HorizontalAlignment: Center);
          }
        }

        Group { Anchor: (Height: 10); }

        Group #ServerInfoCommandsCard {
          LayoutMode: Top;
          Anchor: (Height: 90, Left: 0, Right: 0);
          Background: #000000(0.25);
          Padding: (Top: 8, Left: 12, Right: 12, Bottom: 8);

          Label {
            Text: "USEFUL COMMANDS";
            Anchor: (Height: 16);
            Style: (FontSize: 10, TextColor: #d9c6a5, RenderBold: true, RenderUppercase: true, LetterSpacing: 1);
          }
          Group { Anchor: (Height: 6); }

          Group {
            LayoutMode: Top;
            Anchor: (Height: 46, Left: 0, Right: 0);
            Background: #111b2a(0.85);
            Padding: (Top: 6, Left: 10, Right: 10, Bottom: 6);

            Label { Text: "Open Character Menu"; Style: (FontSize: 11, TextColor: #b9c9e8, HorizontalAlignment: Center); }
            Group { Anchor: (Height: 3); }
            Label { Text: "/c   /char   /character"; Style: (FontSize: 13, TextColor: #ffffff, RenderBold: true, HorizontalAlignment: Center); }
          }
        }

        Group { FlexWeight: 1; }

        Label #ServerInfoPatchVersion {
          Text: "Patch: -";
          Anchor: (Height: 14, Left: 0, Right: 0);
          Style: (FontSize: 10, TextColor: #aaaaaa, HorizontalAlignment: Center);
        }
      }

      // --- QUESTS TAB ---
      Group #TabQuests {
        LayoutMode: Left;
        Visible: false;

        // LEFT COLUMN: Quest List
        Group #QuestListColumn {
          LayoutMode: Top;
          Anchor: (Width: 230);
          Padding: (Left: 6, Right: 6, Top: 6, Bottom: 6);
          Background: #000000(0.35);

          // 1. Filters Row (Dropdown + Checkboxes)
          Group #QuestFilterBar {
            LayoutMode: Left;
            Anchor: (Left: 0, Right: 0, Top: 0);
            Padding: (Bottom: 6);

            Group #QuestFilterRow {
              LayoutMode: Left;
              Anchor: (Height: 28, Top: 0, Left: 0);

              Label {
                Text: "Order:";
                Anchor: (Width: 40);
                Style: (FontSize: 10, TextColor: #d9c6a5, VerticalAlignment: Center);
              }
              Group { Anchor: (Width: 4); }
              DropdownBox #QuestFilterInput {
                Anchor: (Width: 120, Height: 24);
                Style: (...$C.@DefaultDropdownBoxStyle);
                MaxSelection: 1;
                ShowLabel: true;
                Value: "ALPHABETICAL";

                DropdownEntry { Text: "A-Z"; Value: "ALPHABETICAL"; Selected: true; }
                DropdownEntry { Text: "Length"; Value: "BY_LENGTH"; }
            }
            }

            Group { FlexWeight: 1; }

            Group #FilterOptionsRow {
              LayoutMode: Top;
              Anchor: (Width: 150);

              $C.@CheckBoxWithLabel #HideCompletedToggle {
                @Text = "";
                Anchor: (Width: 100, Height: 22);
                TooltipText: "Hide Completed";
                TextTooltipStyle: $C.@DefaultTextTooltipStyle;
              }

              Group { Anchor: (Height: 4); }

              $C.@CheckBoxWithLabel #HideUnavailableToggle {
                @Text = "";
                Anchor: (Width: 100, Height: 22);
                TooltipText: "Hide Unavailable";
                TextTooltipStyle: $C.@DefaultTextTooltipStyle;
              }
            }
          }

          // 3. Quest List Scrollable Container
          Group #QuestListScroll {
            LayoutMode: TopScrolling;
            Anchor: (Left: 0, Right: 0, Height: 330); // Reduced height to fit Footer
            Background: #000000(0.15);
            Padding: (Top: 4, Bottom: 4, Right: 6);
            FlexWeight: 1;

            Group #QuestList {
              LayoutMode: Top;
              Anchor: (Left: 0, Right: 0);
            }
          }

          // 4. QUEST POINTS FOOTER (Pinned to bottom of Left Column)
          Group #QuestPointsFooter {
            LayoutMode: Right;
            Background: #000000(0.30);

            Label #QuestPointsLabel {
              Text: "Quest Points: 0 / 0";
              Style: (
                FontSize: 12,
                TextColor: #55FF55,
                RenderBold: true,
                HorizontalAlignment: Center);
              Padding: (Right: 4);
            }
          }
        }
        // --- END QUEST LIST COLUMN ---

        Group { Anchor: (Width: 12); }

        // RIGHT COLUMN: Quest Details
        Group #QuestDetailPanel {
          LayoutMode: Top;
          FlexWeight: 1;
          Padding: (Top: 0, Left: 8, Right: 8, Bottom: 8);
          Background: #000000(0.25);

          // Quest Title Header
          Group #QuestDetailTitleHeader {
            LayoutMode: Top;
            Anchor: (Height: 40, Left: 0, Right: 0);
            Padding: (Top: 6, Left: 6, Right: 6, Bottom: 4);
            Background: #1f3554(0.55);

            Label #QuestDetailTitle {
              Text: "Select a Quest";
              Style: (FontSize: 16, TextColor: #f2d38a, RenderBold: true, HorizontalAlignment: Center, Wrap: true);
              Anchor: (Height: 26, Left: 0, Right: 0);
            }

            Group #QuestDetailTitleBorder {
              Anchor: (Height: 1, Left: 0, Right: 0);
              Background: #f2d38a;
            }
          }

          Group { Anchor: (Height: 4); }

          // Description / Journal
          Group #QuestTextArea {
            LayoutMode: Top;
            Anchor: (Height: 120, Left: 0, Right: 0);

            // Quest Description
            Group #QuestDescScroll {
              LayoutMode: TopScrolling;
              Anchor: (Height: 120, Left: 0, Right: 0);
              Padding: (Right: 6);

              Label #QuestDetailDesc {
                Text: "Click a quest to see its details.";
                Style: (FontSize: 11, TextColor: #e6d9c3, HorizontalAlignment: Center, Wrap: true);
                Anchor: (Left: 2, Right: 2);
              }
            }

            // Journal (Quest Stages)
            Group #QuestJournalSection {
              LayoutMode: Top;
              Anchor: (Height: 120, Left: 0, Right: 0);
              Visible: false;

              Label {
                Text: "JOURNAL";
                Style: (FontSize: 10, TextColor: #d9c6a5, RenderBold: true, RenderUppercase: true, LetterSpacing: 1);
                Anchor: (Height: 16);
              }
              Group { Anchor: (Height: 4); }

              Group #QuestJournalScroll {
                LayoutMode: TopScrolling;
                Anchor: (Height: 96, Left: 0, Right: 0);
                Background: #000000(0.15);
                Padding: (Top: 4, Bottom: 4, Left: 4, Right: 10);

                Group #QuestJournalList {
                  LayoutMode: Top;
                }
              }
            }
          }

          Group { Anchor: (Height: 8); }

          // Requirements Section
          Group #QuestRequirementsSection {
            LayoutMode: Top;
            Anchor: (Left: 0, Right: 0);

            // Level Requirements Header + Toggle
            Group #LevelReqHeader {
              LayoutMode: Left;
              Anchor: (Height: 20, Left: 0, Right: 0);
              Background: #000000(0.2);
              Padding: (Left: 4, Right: 2);

              Label {
                Text: "LEVEL REQUIREMENTS";
                Style: (FontSize: 10, TextColor: #d9c6a5, RenderBold: true, RenderUppercase: true, LetterSpacing: 1, VerticalAlignment: Center);
              }
              Group { FlexWeight: 1; }
              TextButton #LevelReqToggle {
                Anchor: (Width: 18, Height: 16);
                Text: "-";
              }
            }

            Group #LevelReqContent {
              LayoutMode: Top;
              Anchor: (Left: 0, Right: 0);
              Padding: (Top: 4, Bottom: 4);
              Visible: true;
            }

            Group { Anchor: (Height: 4); }

            // Item Requirements Header + Toggle
            Group #ItemReqHeader {
              LayoutMode: Left;
              Anchor: (Height: 20, Left: 0, Right: 0);
              Background: #000000(0.2);
              Padding: (Left: 4, Right: 2);

              Label {
                Text: "ITEM REQUIREMENTS";
                Style: (FontSize: 10, TextColor: #d9c6a5, RenderBold: true, RenderUppercase: true, LetterSpacing: 1, VerticalAlignment: Center);
              }
              Group { FlexWeight: 1; }
              TextButton #ItemReqToggle {
                Anchor: (Width: 18, Height: 16);
                Text: "-";
              }
            }

            Group #ItemReqContent {
              LayoutMode: Top;
              Anchor: (Left: 0, Right: 0);
              Padding: (Top: 4, Bottom: 4);
              Visible: true;
            }

            Group { Anchor: (Height: 4); }

            // Quest Prerequisites Header + Toggle
            Group #QuestReqHeader {
              LayoutMode: Left;
              Anchor: (Height: 20, Left: 0, Right: 0);
              Background: #000000(0.2);
              Padding: (Left: 4, Right: 2);

              Label {
                Text: "QUEST REQUIREMENTS";
                Style: (FontSize: 10, TextColor: #d9c6a5, RenderBold: true, RenderUppercase: true, LetterSpacing: 1, VerticalAlignment: Center);
              }
              Group { FlexWeight: 1; }
              TextButton #QuestReqToggle {
                Anchor: (Width: 18, Height: 16);
                Text: "-";
              }
            }

            Group #QuestReqContent {
              LayoutMode: Top;
              Anchor: (Left: 0, Right: 0);
              Padding: (Top: 4, Bottom: 4);
              Visible: true;
            }
          }

          Group { Anchor: (Height: 8); }

          // Rewards Section
          Group #QuestRewardsSection {
            LayoutMode: Top;
            Anchor: (Left: 0, Right: 0);
            Visible: false;

            Label {
              Text: "REWARDS";
              Style: (FontSize: 10, TextColor: #d9c6a5, RenderBold: true, RenderUppercase: true, LetterSpacing: 1);
              Anchor: (Height: 16);
            }
            Group { Anchor: (Height: 4); }

            Group #RewardsContent {
              LayoutMode: Top;
              Anchor: (Left: 0, Right: 0);
            }
          }

          Group { FlexWeight: 1; }

          // Action Buttons
          Group #QuestActionButtons {
            LayoutMode: Top;
            Anchor: (Left: 0, Right: 0);
            Visible: false;

            Label #QuestActionHint {
              Text: "";
              Style: (FontSize: 11, TextColor: #d9c6a5, RenderBold: true, HorizontalAlignment: Center, Wrap: true);
              Anchor: (Height: 16, Left: 0, Right: 0);
              Visible: false;
            }
            Group { Anchor: (Height: 4); }

            Group #QuestAcceptRow {
              LayoutMode: Left;
              Anchor: (Left: 0, Right: 0, Height: 28);
              Group { FlexWeight: 1; }
              TextButton #BtnAcceptQuest {
                Anchor: (Width: 150, Height: 28, Right: 4, Bottom: 4);
                Text: "Accept Quest";
                Style: $C.@DefaultTextButtonStyle;
                Visible: false;
              }
            }
            Group #QuestTrackRow {
              LayoutMode: Left;
              Anchor: (Left: 0, Right: 0, Height: 28);
              Group { FlexWeight: 1; }
              TextButton #BtnTrackQuest {
                Anchor: (Width: 150, Height: 28, Right: 4, Bottom: 4);
                Text: "Track Quest";
                Style: $C.@DefaultTextButtonStyle;
                Visible: false;
              }
            }
          }
        }
        // --- END QUEST DETAIL PANEL ---

      }
      // --- END TAB QUESTS ---

      // --- ATTRIBUTES TAB ---
      Group #TabAttributes {
        LayoutMode: Left;
        Anchor: (Left: 0, Right: 0, Height: 450);
        Visible: false;

        Group #AttrOverviewPanel {
          LayoutMode: Top;
          Anchor: (Width: 300, Height: 450);
          Background: #000000(0.25);
          Padding: (Top: 10, Left: 10, Right: 10, Bottom: 10);

          Label {
            Text: "OVERVIEW";
            Anchor: (Height: 16);
            Style: (FontSize: 10, TextColor: #d9c6a5, RenderBold: true, RenderUppercase: true, LetterSpacing: 1);
          }
          Group { Anchor: (Height: 8); }

          Group #AttrOverviewScroll {
            LayoutMode: TopScrolling;
            Anchor: (Left: 0, Right: 0);
            FlexWeight: 1;
            Padding: (Right: 6);

            Group #AttrOverviewContent {
              LayoutMode: Top;
              Anchor: (Left: 0, Right: 0);
            }
          }
        }

        Group { Anchor: (Width: 10); }

        Group #AttrDetailsPanel {
          LayoutMode: Top;
          Anchor: (Height: 450);
          FlexWeight: 1;
          Background: #000000(0.25);
          Padding: (Top: 10, Left: 10, Right: 10, Bottom: 10);

          Group #AttrDetailHeader {
            LayoutMode: Left;
            Anchor: (Height: 20, Left: 0, Right: 0);
            Label {
              Text: "DETAILS";
              Style: (FontSize: 10, TextColor: #d9c6a5, RenderBold: true, RenderUppercase: true, LetterSpacing: 1);
            }
            Group { FlexWeight: 1; }
            Label #AttrDetailCategoryTitle {
              Text: "Offense";
              Style: (FontSize: 12, TextColor: #f2d38a, RenderBold: true, HorizontalAlignment: End, VerticalAlignment: Center);
            }
          }
          Group { Anchor: (Height: 8); }

          Group #AttrDetailCategoryButtonsRow1 {
            LayoutMode: Left;
            Anchor: (Height: 30, Left: 0, Right: 0);
            TextButton #AttrDetailOffenseBtn { Anchor: (Width: 108, Height: 28); Text: "Offense"; Style: $C.@DefaultTextButtonStyle; }
            Group { Anchor: (Width: 6); }
            TextButton #AttrDetailDefenseBtn { Anchor: (Width: 108, Height: 28); Text: "Defense"; Style: $C.@DefaultTextButtonStyle; }
            Group { Anchor: (Width: 6); }
            TextButton #AttrDetailResourcesBtn { Anchor: (Width: 108, Height: 28); Text: "Resources"; Style: $C.@DefaultTextButtonStyle; }
          }
          Group { Anchor: (Height: 6); }

          Group #AttrDetailCategoryButtonsRow2 {
            LayoutMode: Left;
            Anchor: (Height: 30, Left: 0, Right: 0);
            TextButton #AttrDetailMobilityBtn { Anchor: (Width: 108, Height: 28); Text: "Mobility"; Style: $C.@DefaultTextButtonStyle; }
            Group { Anchor: (Width: 6); }
            TextButton #AttrDetailGatheringBtn { Anchor: (Width: 108, Height: 28); Text: "Gathering"; Style: $C.@DefaultTextButtonStyle; }
            Group { Anchor: (Width: 6); }
            TextButton #AttrDetailHealingBtn { Anchor: (Width: 108, Height: 28); Text: "Healing"; Style: $C.@DefaultTextButtonStyle; }
          }
          Group { Anchor: (Height: 10); }

          Group #AttrDetailsScroll {
            LayoutMode: TopScrolling;
            Anchor: (Left: 0, Right: 0);
            FlexWeight: 1;
            Padding: (Right: 6);

            Group #AttrDetailContent {
              LayoutMode: Top;
              Anchor: (Left: 0, Right: 0);
            }
          }
          Group { Anchor: (Height: 8); }

          Label #AttrDetailHint {
            Text: "Select a detail category.";
            Anchor: (Height: 28, Left: 0, Right: 0);
            Style: (FontSize: 10, TextColor: #9fb0c5, Wrap: true);
          }
        }
      }

      // --- SKILLS TAB ---
      Group #TabSkills {
        LayoutMode: Left;
        Anchor: (Width: 470);
        Visible: true;

        Group #SkillsGrid {
          LayoutMode: Left;
          Anchor: (Width: 470);

          // COLUMN 1
          Group #Col1 {
            LayoutMode: Top;
            FlexWeight: 1;
          }
          Group { Anchor: (Width: 5); }
          // COLUMN 2
          Group #Col2 {
            LayoutMode: Top;
            FlexWeight: 1;
          }
          Group { Anchor: (Width: 5); }
          // COLUMN 3
          Group #Col3 {
            LayoutMode: Top;
            FlexWeight: 1;
          }
        }
      }

      Group #TabFriends {
        LayoutMode: Top;
        Visible: false;

        Group {
          LayoutMode: Top;
          Anchor: (Height: 54, Left: 0, Right: 0);
          Background: #0d1f30(0.8);
          Padding: (Top: 8, Left: 10, Right: 10, Bottom: 8);

          Label {
            Text: "FRIENDS LIST";
            Anchor: (Height: 14);
            Style: (FontSize: 10, TextColor: #d9c6a5, RenderBold: true, RenderUppercase: true, LetterSpacing: 1, HorizontalAlignment: Center);
          }
          Group { Anchor: (Height: 4); }
          Label #FriendsPromptLabel {
            Text: "Look at a player and press F to interact.";
            Anchor: (Height: 16);
            Style: (FontSize: 11, TextColor: #f7e9cd, HorizontalAlignment: Center);
          }
          Group { Anchor: (Height: 2); }
          Label #FriendsSummaryLabel {
            Text: "Friends: 0 | Online: 0 | Requests: 0";
            Anchor: (Height: 14);
            Style: (FontSize: 10, TextColor: #9fb0c5, HorizontalAlignment: Center);
          }
        }

        Group { Anchor: (Height: 8); }

        Group {
          LayoutMode: Left;
          Anchor: (Height: 356, Left: 0, Right: 0);

          Group #FriendsColumn {
            LayoutMode: Top;
            Anchor: (Width: 380);
            Background: #000000(0.25);
            Padding: (Top: 8, Left: 8, Right: 8, Bottom: 8);

            Label {
              Text: "FRIENDS";
              Anchor: (Height: 14);
              Style: (FontSize: 10, TextColor: #d9c6a5, RenderBold: true, RenderUppercase: true, LetterSpacing: 1);
            }
            Group { Anchor: (Height: 6); }

            Group #FriendsListScroll {
              LayoutMode: TopScrolling;
              Anchor: (Left: 0, Right: 0, Top: 0, Bottom: 0);
              Padding: (Right: 6);

              Group #FriendsList {
                LayoutMode: Top;
                Anchor: (Left: 0, Right: 0);
              }
            }
          }

          Group { Anchor: (Width: 10); }

          Group #FriendsRightColumn {
            LayoutMode: Top;
            Anchor: (Width: 290);

            Group {
              LayoutMode: Top;
              Anchor: (Height: 172, Left: 0, Right: 0);
              Background: #000000(0.25);
              Padding: (Top: 8, Left: 8, Right: 8, Bottom: 8);

              Label {
                Text: "INCOMING REQUESTS";
                Anchor: (Height: 14);
                Style: (FontSize: 10, TextColor: #d9c6a5, RenderBold: true, RenderUppercase: true, LetterSpacing: 1);
              }
              Group { Anchor: (Height: 6); }

              Group #FriendRequestsScroll {
                LayoutMode: TopScrolling;
                Anchor: (Left: 0, Right: 0, Top: 0, Bottom: 0);
                Padding: (Right: 6);

                Group #FriendRequestsList {
                  LayoutMode: Top;
                  Anchor: (Left: 0, Right: 0);
                }
              }
            }

            Group { Anchor: (Height: 10); }

            Group {
              LayoutMode: Top;
              Anchor: (Height: 174, Left: 0, Right: 0);
              Background: #000000(0.25);
              Padding: (Top: 8, Left: 8, Right: 8, Bottom: 8);

              Label {
                Text: "IGNORED";
                Anchor: (Height: 14);
                Style: (FontSize: 10, TextColor: #d9c6a5, RenderBold: true, RenderUppercase: true, LetterSpacing: 1);
              }
              Group { Anchor: (Height: 6); }

              Group #IgnoredListScroll {
                LayoutMode: TopScrolling;
                Anchor: (Left: 0, Right: 0, Top: 0, Bottom: 0);
                Padding: (Right: 6);

                Group #IgnoredList {
                  LayoutMode: Top;
                  Anchor: (Left: 0, Right: 0);
                }
              }
            }
          }
        }
      }

      Group #TabClan {
        LayoutMode: Top;
        Visible: false;

        Group {
          LayoutMode: Top;
          Anchor: (Height: 132, Left: 0, Right: 0);
          Background: #0d1623(0.75);
          Padding: (Top: 10, Left: 12, Right: 12, Bottom: 10);

          Label {
            Text: "CLAN OVERVIEW";
            Anchor: (Height: 16);
            Style: (FontSize: 11, TextColor: #d9c6a5, RenderBold: true, RenderUppercase: true, LetterSpacing: 1);
          }
          Group { Anchor: (Height: 8); }

          Group {
            LayoutMode: Left;
            Anchor: (Height: 22);
            Label { Text: "Clan"; Style: (FontSize: 12, TextColor: #f2d38a, VerticalAlignment: Center); }
            Group { FlexWeight: 1; }
            Label #ClanNameValue { Text: "Unaligned"; Style: (FontSize: 12, TextColor: #ffffff, RenderBold: true, HorizontalAlignment: End, VerticalAlignment: Center); }
          }
          Group {
            LayoutMode: Left;
            Anchor: (Height: 22);
            Label { Text: "Rank"; Style: (FontSize: 12, TextColor: #f2d38a, VerticalAlignment: Center); }
            Group { FlexWeight: 1; }
            Label #ClanRankValue { Text: "Wanderer"; Style: (FontSize: 12, TextColor: #ffffff, RenderBold: true, HorizontalAlignment: End, VerticalAlignment: Center); }
          }
          Group {
            LayoutMode: Left;
            Anchor: (Height: 22);
            Label { Text: "Members"; Style: (FontSize: 12, TextColor: #f2d38a, VerticalAlignment: Center); }
            Group { FlexWeight: 1; }
            Label #ClanMembersValue { Text: "1 total / 1 online"; Style: (FontSize: 12, TextColor: #ffffff, RenderBold: true, HorizontalAlignment: End, VerticalAlignment: Center); }
          }
        }

        Group { Anchor: (Height: 10); }

        Group {
          LayoutMode: Top;
          Anchor: (Height: 128, Left: 0, Right: 0);
          Background: #000000(0.25);
          Padding: (Top: 10, Left: 12, Right: 12, Bottom: 10);

          Label {
            Text: "CLAN MOTD";
            Anchor: (Height: 16);
            Style: (FontSize: 11, TextColor: #d9c6a5, RenderBold: true, RenderUppercase: true, LetterSpacing: 1);
          }
          Group { Anchor: (Height: 8); }
          Label #ClanMotdValue {
            Text: "No clan message set.";
            Anchor: (Left: 0, Right: 0);
            Style: (FontSize: 12, TextColor: #f7e9cd, Wrap: true);
          }
        }
      }
    }

    // --- FOOTER (Global Stats) ---
    Group #Footer {
      LayoutMode: Left;
      Anchor: (Bottom: 15, Left: 20, Right: 20, Height: 54);
      Background: #000000(0.3); // Slight dark background

      // Total Level
      Group {
        LayoutMode: Top;
        FlexWeight: 1;
        Group { Anchor: (Height: 5); }
        Label { Text: "Total Level"; Style: (FontSize: 12, TextColor: #FFFFFF, HorizontalAlignment: Center); }
        Group { Anchor: (Height: 3); }
        Group { Anchor: (Height: 1, Left: 34, Right: 34); Background: #FFFFFF(0.75); }
        Group { Anchor: (Height: 4); }
        Label #TotalLevelVal { Text: "---"; Style: (FontSize: 16, TextColor: #FFFFFF, RenderBold: true, HorizontalAlignment: Center); }
      }

      // Combat Level (Global)
      Group {
        LayoutMode: Top;
        FlexWeight: 1;
        Group { Anchor: (Height: 0); }
        Label { Text: "Combat Level"; Style: (FontSize: 12, TextColor: #f2d38a, HorizontalAlignment: Center, RenderBold: true); }
        Group { Anchor: (Height: 4); }
        Group { Anchor: (Height: 2, Left: 26, Right: 26); Background: #f2d38a; }
        Group { Anchor: (Height: 3); }
        Label #CombatLevelVal { Text: "---"; Style: (FontSize: 20, TextColor: #f2d38a, RenderBold: true, HorizontalAlignment: Center); }
      }

      // Quest Points (Currency)
      Group {
        LayoutMode: Top;
        FlexWeight: 1;
        Group { Anchor: (Height: 5); }
        Label { Text: "Quest Pts"; Style: (FontSize: 12, TextColor: #FFFFFF, HorizontalAlignment: Center); }
        Group { Anchor: (Height: 3); }
        Group { Anchor: (Height: 1, Left: 34, Right: 34); Background: #FFFFFF(0.75); }
        Group { Anchor: (Height: 4); }
        Label #QuestPointsVal { Text: "0"; Style: (FontSize: 16, TextColor: #FFFFFF, RenderBold: true, HorizontalAlignment: Center); }
      }
    }
  }
}
