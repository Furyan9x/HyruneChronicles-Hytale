$C = "../Common.ui";

@TitleText = LabelStyle(FontSize: 20, TextColor: #f2d38a, RenderBold: true, HorizontalAlignment: Center, VerticalAlignment: Center);
@SectionHeader = LabelStyle(FontSize: 12, TextColor: #f2d38a, RenderBold: true, RenderUppercase: true, VerticalAlignment: Center);
@ValueText = LabelStyle(FontSize: 13, TextColor: #ffffff, VerticalAlignment: Center);
@TopSlotOuterFrame = PatchStyle(Color: #f2d38a(0.92), Border: 2);
@TopSlotInnerFrame = PatchStyle(Color: #132d43(0.94), Border: 2);
@InventorySlotBackground = PatchStyle(Color: #122b3f(0.92), Border: 2);

@TabIconAnchor = Anchor(Width: 34, Height: 20);
@TabButtonAnchor = Anchor(Width: 120, Height: 30);
@GemTabStyle = TabStyleState(
  Background: "Images/Tab.png",
  Overlay: (TexturePath: "Images/TabOverlay.png", Border: 0),
  IconAnchor: @TabIconAnchor,
  Anchor: @TabButtonAnchor
);
@GemTabsStyle = TabNavigationStyle(
  TabStyle: (Default: @GemTabStyle, Hovered: @GemTabStyle, Pressed: @GemTabStyle),
  SelectedTabStyle: (Default: (...@GemTabStyle, Overlay: (TexturePath: "Images/TabSelectedOverlay.png", Border: 0)))
);

$C.@DecoratedContainer {
  Anchor: (Width: 920, Height: 740);

  Group #Title {
    Anchor: (Top: 0, Left: 0, Right: 0, Height: 52);

    Label {
      Text: "Gem Socketing";
      Style: @TitleText;
      Anchor: (Left: 40, Right: 40, Height: 32, Top: 6);
    }

    TextButton #GemClose {
      Anchor: (Right: 6, Top: 8, Width: 24, Height: 24);
      Text: "X";
      Style: $C.@HeaderTextButtonStyle;
    }
  }

  Group #Content {
    LayoutMode: Top;
    Anchor: (Top: 54, Left: 14, Right: 14, Bottom: 14);

    TabNavigation #TabBar {
      Anchor: (Height: 34, Left: 8, Right: 8);
      Style: @GemTabsStyle;
      SelectedTab: "Add";

      TabButton #TabAddBtn { Id: "Add"; Text: "Add"; Icon: "none.png"; IconSelected: "none.png"; }
      TabButton #TabRemoveBtn { Id: "Remove"; Text: "Remove"; Icon: "none.png"; IconSelected: "none.png"; }
    }

    Group { Anchor: (Height: 8); }

    Group #TopSlotsPanel {
      LayoutMode: Left;
      Anchor: (Height: 212, Left: 0, Right: 0);
      Background: #081d2a(0.66);
      Padding: (Left: 14, Right: 14, Top: 10, Bottom: 10);

      Group {
        LayoutMode: Top;
        Anchor: (Width: 400, Height: 190);

        Label { Text: "Equipment Item"; Style: ( ...@SectionHeader, HorizontalAlignment: Center ); Anchor: (Height: 18, Left: 0, Right: 0); }
        Label #TopEquipName { Text: "No equipment selected"; Style: ( ...@ValueText, HorizontalAlignment: Center ); Anchor: (Height: 22, Left: 0, Right: 0); }
        Group { Anchor: (Height: 6); }
        Group {
          LayoutMode: Center;
          Anchor: (Height: 64, Left: 0, Right: 0);
          Group {
            Anchor: (Width: 70, Height: 70);
            Background: @TopSlotOuterFrame;
            Padding: (Left: 2, Top: 2, Right: 2, Bottom: 2);

            Group {
              Anchor: (Full: 0);
              Background: @TopSlotInnerFrame;
              Padding: (Left: 5, Top: 5, Right: 5, Bottom: 5);
              ItemIcon #TopEquipIcon { Anchor: (Width: 56, Height: 56); Visible: false; }
            }
          }
        }
        Group { Anchor: (Height: 8); }
        Label #ReceiverPreviewGem { Text: "Sockets: 0/0"; Style: ( ...@ValueText, HorizontalAlignment: Center ); Anchor: (Height: 22, Left: 0, Right: 0); }
      }

      Group { FlexWeight: 1; }

      Group {
        LayoutMode: Top;
        Anchor: (Width: 400, Height: 190);

        Label { Text: "Material Item"; Style: ( ...@SectionHeader, HorizontalAlignment: Center ); Anchor: (Height: 18, Left: 0, Right: 0); }
        Label #TopMaterialName { Text: "No gem selected"; Style: ( ...@ValueText, HorizontalAlignment: Center ); Anchor: (Height: 22, Left: 0, Right: 0); }
        Group { Anchor: (Height: 6); }
        Group {
          LayoutMode: Center;
          Anchor: (Height: 64, Left: 0, Right: 0);
          Group {
            Anchor: (Width: 70, Height: 70);
            Background: @TopSlotOuterFrame;
            Padding: (Left: 2, Top: 2, Right: 2, Bottom: 2);

            Group {
              Anchor: (Full: 0);
              Background: @TopSlotInnerFrame;
              Padding: (Left: 5, Top: 5, Right: 5, Bottom: 5);
              ItemIcon #TopMaterialIcon { Anchor: (Width: 56, Height: 56); Visible: false; }
            }
          }
        }
        Group { Anchor: (Height: 8); }
        Label #TopMaterialOwned { Text: "Owned: 0"; Style: ( ...@ValueText, HorizontalAlignment: Center ); Anchor: (Height: 22, Left: 0, Right: 0); }
        Label #ReceiverPreviewSocketed { Text: "Selected Effect: -"; Style: ( ...@ValueText, HorizontalAlignment: Center ); Anchor: (Height: 22, Left: 0, Right: 0); }
        Label #TopMaterialModeHint {
          Text: "Select a material from the right inventory list.";
          Style: (FontSize: 11, TextColor: #9db3c6, VerticalAlignment: Center, HorizontalAlignment: Center);
          Anchor: (Height: 34, Left: 0, Right: 0);
        }
      }
    }

    Group { Anchor: (Height: 8); }

    Group {
      LayoutMode: Top;
      Anchor: (Height: 156, Left: 0, Right: 0);
      Background: #071927(0.55);
      Padding: (Top: 8, Left: 10, Right: 10, Bottom: 8);

      Label { Text: "Socketed Gems"; Style: @SectionHeader; Anchor: (Height: 18, Left: 0, Right: 0); }
      Group #SocketedGemListScroll {
        LayoutMode: TopScrolling;
        Anchor: (Height: 98, Left: 0, Right: 0);
        Padding: (Right: 14);
        Group #SocketedGemList { LayoutMode: Top; Anchor: (Left: 0, Right: 0); }
      }
      Label #SocketedGemEmpty {
        Text: "No gems socketed on selected item.";
        Style: (FontSize: 12, TextColor: #9fb0c5, HorizontalAlignment: Center, VerticalAlignment: Center);
        Anchor: (Height: 30, Left: 0, Right: 0);
        Visible: true;
      }
    }

    Group { Anchor: (Height: 8); }

    Group #InventoryReplica {
      LayoutMode: Left;
      FlexWeight: 1;
      Anchor: (Left: 0, Right: 0);

      Group {
        LayoutMode: Top;
        FlexWeight: 1;
        Background: #071a28(0.6);
        Padding: (Top: 8, Left: 8, Right: 8, Bottom: 8);

        Label { Text: "Equipment"; Style: @SectionHeader; Anchor: (Height: 18, Left: 0, Right: 0); }
        ItemGrid #EquipInventoryGrid {
          FlexWeight: 1;
          Anchor: (Left: 0, Right: 0);
          SlotsPerRow: 5;
          ShowScrollbar: true;
          KeepScrollPosition: true;
          AreItemsDraggable: false;
          DisplayItemQuantity: true;
          RenderItemQualityBackground: true;
          Style: (
            SlotBackground: @InventorySlotBackground,
            SlotSize: 74,
            SlotIconSize: 64
          );
        }
        Label #EquipInventoryEmpty {
          Text: "No eligible equipment items found.";
          Style: (FontSize: 12, TextColor: #9fb0c5, HorizontalAlignment: Center, VerticalAlignment: Center);
          Anchor: (Height: 22, Left: 0, Right: 0);
          Visible: false;
        }
      }

      Group { Anchor: (Width: 8); }

      Group {
        LayoutMode: Top;
        FlexWeight: 1;
        Background: #071a28(0.6);
        Padding: (Top: 8, Left: 8, Right: 8, Bottom: 8);

        Label #RightInventoryTitle { Text: "Gem Inventory"; Style: @SectionHeader; Anchor: (Height: 18, Left: 0, Right: 0); }
        ItemGrid #MaterialInventoryGrid {
          FlexWeight: 1;
          Anchor: (Left: 0, Right: 0);
          SlotsPerRow: 5;
          ShowScrollbar: true;
          KeepScrollPosition: true;
          AreItemsDraggable: false;
          DisplayItemQuantity: true;
          RenderItemQualityBackground: true;
          Style: (
            SlotBackground: @InventorySlotBackground,
            SlotSize: 74,
            SlotIconSize: 64
          );
        }
        Label #MaterialInventoryEmpty {
          Text: "No valid material items found.";
          Style: (FontSize: 12, TextColor: #9fb0c5, HorizontalAlignment: Center, VerticalAlignment: Center);
          Anchor: (Height: 22, Left: 0, Right: 0);
          Visible: false;
        }
      }
    }

    Group { Anchor: (Height: 10); }

    Group #AddActionRow {
      LayoutMode: Center;
      Anchor: (Left: 0, Right: 0, Height: 40);
      Visible: true;
      TextButton #SocketButton {
        Anchor: (Width: 220, Height: 34);
        Text: "Socket";
        Style: $C.@DefaultTextButtonStyle;
      }
    }

    Group #RemoveActionRow {
      LayoutMode: Center;
      Anchor: (Left: 0, Right: 0, Height: 40);
      Visible: true;
      TextButton #RemoveButton {
        Anchor: (Width: 220, Height: 34);
        Text: "Remove";
        Style: $C.@DefaultTextButtonStyle;
      }
    }
  }
}
