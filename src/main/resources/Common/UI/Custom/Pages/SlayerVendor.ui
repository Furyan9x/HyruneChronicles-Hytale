$C = "../Common.ui";

// --- STYLES ---
@PageTitleStyle = LabelStyle(FontSize: 20, TextColor: #ffffff, RenderBold: true, VerticalAlignment: Center, HorizontalAlignment: Center);
@TabIconAnchor = Anchor(Width: 40, Height: 32);
@TabButtonAnchor = Anchor(Width: 80, Height: 32);

@ShopTabStyle = TabStyleState(
  Background: "Images/Tab.png",
  Overlay: (TexturePath: "Images/TabOverlay.png", Border: 0),
  IconAnchor: @TabIconAnchor,
  Anchor: @TabButtonAnchor
);
@ShopTabsStyle = TabNavigationStyle(
  TabStyle: ( Default: @ShopTabStyle, Hovered: @ShopTabStyle, Pressed: @ShopTabStyle ),
  SelectedTabStyle: ( Default: (...@ShopTabStyle, Overlay: (TexturePath: "Images/TabSelectedOverlay.png", Border: 0)) )
);

$C.@PageOverlay {
  $C.@DecoratedContainer {
    Anchor: (Width: 760, Height: 550);

    // --- TITLE ---
    #Title {
      Group {
        Label #PageTitle { Text: "Slayer Rewards"; Anchor: (Left: 0, Right: 0, Height: 30); Style: @PageTitleStyle; }
        TextButton #BtnClose { Anchor: (Right: 0, Top: 3, Width: 30, Height: 25); Text: "X"; }
      }
    }

    // --- BODY ---
    #Content {
      LayoutMode: Top;
      Padding: (Top: 10, Left: 20, Right: 20, Bottom: 60);

      // --- TABS ---
      TabNavigation #TabBar {
        Anchor: (Height: 36, Left: 4, Right: 4);
        Style: @ShopTabsStyle;
        SelectedTab: "Buy";

        TabButton #TabBuyBtn { Id: "Buy"; Text: "Buy"; Icon: "none.png"; IconSelected: "none.png"; }
        TabButton #TabLearnBtn { Id: "Learn"; Text: "Learn"; Icon: "none.png"; IconSelected: "none.png"; }
        TabButton #TabTaskBtn { Id: "Task"; Text: "Task"; Icon: "none.png"; IconSelected: "none.png"; }
      }

      Group { Anchor: (Height: 16); }

      // --- DYNAMIC CONTAINERS ---

      // 1. BUY TAB
      Group #TabBuy {
        LayoutMode: Top;
        Visible: true;

        Group #BuyListScroll {
          LayoutMode: TopScrolling;
          Anchor: (Left: 0, Right: 0, Height: 400);
          Padding: (Right: 6);

          // Define the 2-Column Grid directly here
                    Group #BuyGrid {
                      LayoutMode: Left;
                      Anchor: (Left: 0, Right: 0);

                      // Left Column
                      Group #BuyCol1 {
                          LayoutMode: Top;
                          FlexWeight: 1;
                      }

                      // Spacer
                      Group { Anchor: (Width: 10); }

                      // Right Column
                      Group #BuyCol2 {
                          LayoutMode: Top;
                          FlexWeight: 1;
            }
          }
        }
      }

      // 2. LEARN TAB
      Group #TabLearn {
        LayoutMode: Top;
        Visible: false;
        Group #LearnListScroll { LayoutMode: TopScrolling; Anchor: (Left: 0, Right: 0, Height: 400); Padding: (Right: 6); }

        Group #LearnGrid {
                              LayoutMode: Left;
                              Anchor: (Left: 0, Right: 0);

                              // Left Column
                              Group #LearnCol1 {
                                  LayoutMode: Top;
                                  FlexWeight: 1;
                              }

                              // Spacer
                              Group { Anchor: (Width: 10); }

                              // Right Column
                              Group #LaernCol2 {
                                  LayoutMode: Top;
                                  FlexWeight: 1;
                    }
}
      }

      // 3. TASK TAB
      Group #TabTask {
        LayoutMode: Top;
        Visible: false;
        Group #TaskListScroll { LayoutMode: TopScrolling; Anchor: (Left: 0, Right: 0, Height: 400); Padding: (Right: 6); }
        Group #TaskGrid {
                              LayoutMode: Left;
                              Anchor: (Left: 0, Right: 0);

                              // Left Column
                              Group #TaskCol1 {
                                  LayoutMode: Top;
                                  FlexWeight: 1;
                              }

                              // Spacer
                              Group { Anchor: (Width: 10); }

                              // Right Column
                              Group #TaskCol2 {
                                  LayoutMode: Top;
                                  FlexWeight: 1;
                    }
      }
    }

    // --- FOOTER ---
    Group #Footer {
      LayoutMode: Left;
      Anchor: (Bottom: 15, Left: 20, Right: 20, Height: 40);
      Background: #000000(0.3);
      Padding: (Left: 15, Right: 15);

      Group {
        LayoutMode: Left;
        Anchor: (Top: 0, Bottom: 0);
        FlexWeight: 1;
        Label { Text: "Current Points:"; Style: (FontSize: 14, TextColor: #AAAAAA, VerticalAlignment: Center); Anchor: (Width: 110, Height: 40); }
        Label #VendorPoints { Text: "0"; Style: (FontSize: 16, TextColor: #ffffff, RenderBold: true, VerticalAlignment: Center); Anchor: (Height: 40); }
      }
    }
  }
}
}
